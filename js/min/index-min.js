var gb,ga,a,GameBoard,GameActions,Animation;GameBoard={settings:{gameboard:["E","E","E","E","E","E","E","E","E"],winningCombos:[[0,1,2],[3,4,5],[6,7,8],[0,3,6],[1,4,7],[2,5,8],[0,4,8],[2,4,6]],player:"X",computer:"O",place:{0:"#t3square0",1:"#t3square1",2:"#t3square2",3:"#t3square3",4:"#t3square4",5:"#t3square5",6:"#t3square6",7:"#t3square7",8:"#t3square8"},announcement:"#announcement",playAgain:"#play-again",youWin:"#you-win",youLose:"#you-lose",youTie:"#you-tie",playAsO:"#playAsO",tokenSwitch:"#label-switch"},init:function(){gb=this.settings,this.bindUIActions()},bindUIActions:function(){$(gb.playAgain).click(function(){GameBoard.restart()}),$(gb.playAsO).change(function(){GameBoard.switchTokens()})},restart:function(){gb.gameboard=["E","E","E","E","E","E","E","E","E"],Animation.gameOver(),GameBoard.render(gb.gameboard),GameActions.chooseFirstPlayer(),$(gb.youWin).addClass("hidden"),$(gb.youLose).addClass("hidden"),$(gb.youTie).addClass("hidden"),$(gb.playAgain).addClass("hide")},switchTokens:function(){$(gb.playAsO).prop("checked")?(gb.player="O",gb.computer="X"):(gb.player="X",gb.computer="O"),GameBoard.restart()},render:function(){for(var e=0;e<gb.gameboard.length;e++)"E"!==gb.gameboard[e]?($(gb.place[e]).removeClass("clickable piece-X piece-O"),gb.gameboard[e]===gb.computer?($(gb.place[e]).addClass("piece-"+gb.computer),$(gb.place[e]+"> ."+gb.computer).removeClass("hidden")):gb.gameboard[e]===gb.player&&($(gb.place[e]).addClass("piece-"+gb.player),$(gb.place[e]+"> ."+gb.player).removeClass("hidden"))):($(gb.place[e]).addClass("clickable").removeClass("piece-X piece-O"),$(gb.place[e]+"> .O").addClass("hidden"),$(gb.place[e]+"> .opener").addClass("hidden"),$(gb.place[e]+"> .X").addClass("hidden"))}},GameActions={settings:{turn:"player"},init:function(){ga=this.settings,this.bindUIActions(),GameActions.chooseFirstPlayer()},bindUIActions:function(){},chooseFirstPlayer:function(){console.log($(gb.playAsO).prop("checked")),$(gb.playAsO).prop("checked")?GameActions.computerPlays(gb.gameboard):GameActions.playerPlays(gb.gameboard)},computerPlays:function(){console.log("playing");var e=GameActions.findAvailableSpace(gb.gameboard);if(e.length>0){var i=Math.floor(Math.random()*e.length);gb.gameboard[e[i]]=gb.computer,GameBoard.render(gb.gameboard),GameActions.isGameOver()===!1&&GameActions.playerPlays()}},playerPlays:function(){$(document).off().one("click",".clickable",function e(){gb.gameboard[$(this).attr("id").slice(-1)]=gb.player,GameBoard.render(gb.gameboard),GameActions.isGameOver()===!1&&GameActions.computerPlays()})},isGameOver:function(){for(var e=0;e<gb.winningCombos.length;e++){var i=gb.winningCombos[e];if("E"!==gb.gameboard[i[0]]&&gb.gameboard[i[0]]===gb.gameboard[i[1]]&&gb.gameboard[i[0]]===gb.gameboard[i[2]])return $(gb.playAgain).removeClass("hide"),gb.player===gb.gameboard[i[0]]?$(gb.youWin).removeClass("hidden X-wins O-wins").addClass(gb.player+"-wins"):$(gb.youLose).removeClass("hidden X-wins O-wins").addClass(gb.computer+"-wins"),Animation.win(i[0],i[2],gb.gameboard[i[0]]),gb.gameboard[i[0]]}return 0===GameActions.findAvailableSpace(gb.gameboard).length&&($(gb.youTie).removeClass("hidden"),$(gb.playAgain).removeClass("hide"),"tie")},findAvailableSpace:function(){for(var e=[],i=0;i<gb.gameboard.length;i++)"E"===gb.gameboard[i]&&e.push(i);return e}},Animation={settings:{linemaker:"",diagonalLineMaker:""},init:function(){a=this.settings,this.bindUIActions(),Animation.createLines()},bindUIActions:function(){},createLines:function(){a.lineMaker=new LineMaker({parent:{element:"#t3",position:"append"},position:"absolute",lines:[{top:"33%",left:0,width:"100%",height:3,color:"#FFFFFF",hidden:!0},{top:"66%",left:0,width:"100%",height:3,color:"#FFFFFF",hidden:!0},{top:0,left:"33%",width:3,height:"100%",color:"#FFFFFF",hidden:!0},{top:0,left:"66%",width:3,height:"100%",color:"#FFFFFF",hidden:!0},{top:"33%",left:0,width:"100%",height:3,color:"#E24E49",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:0,direction:"LeftRight"}},{top:"66%",left:0,width:"100%",height:3,color:"#E24E49",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:100,direction:"RightLeft"}},{top:0,left:"33%",width:3,height:"100%",color:"#00B2CF",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:200,direction:"BottomTop"}},{top:0,left:"66%",width:3,height:"100%",color:"#00B2CF",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:300,direction:"TopBottom"}},{top:"49%",left:"0",width:"100%",height:6,color:"#00B2CF",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:0,direction:"LeftRight"}},{top:"0",left:"49%",width:6,height:"100%",color:"#00B2CF",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:0,direction:"TopBottom"}},{top:0,left:"16%",width:6,height:"100%",color:"#00B2CF",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:0,direction:"TopBottom"}},{top:0,left:"82%",width:6,height:"100%",color:"#00B2CF",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:0,direction:"TopBottom"}},{top:"16%",left:0,width:"100%",height:6,color:"#00B2CF",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:0,direction:"LeftRight"}},{top:"82%",left:0,width:"100%",height:6,color:"#00B2CF",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:0,direction:"LeftRight"}},{top:"49%",left:"0",width:"100%",height:6,color:"#E24E49",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:0,direction:"LeftRight"}},{top:"0",left:"49%",width:6,height:"100%",color:"#E24E49",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:0,direction:"TopBottom"}},{top:0,left:"16%",width:6,height:"100%",color:"#E24E49",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:0,direction:"TopBottom"}},{top:0,left:"82%",width:6,height:"100%",color:"#E24E49",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:0,direction:"TopBottom"}},{top:"16%",left:0,width:"100%",height:6,color:"#E24E49",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:0,direction:"LeftRight"}},{top:"82%",left:0,width:"100%",height:6,color:"#E24E49",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:0,direction:"LeftRight"}}]}),a.diagonalLineMaker=new LineMaker({parent:{element:"#diagonal",position:"append"},position:"absolute",lines:[{top:"48.5%",left:-26,width:"120%",height:6,color:"#00B2CF",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:0,direction:"LeftRight"}},{top:-26,left:"48.5%",width:6,height:"120%",color:"#00B2CF",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:0,direction:"TopBottom"}},{top:"48.5%",left:-26,width:"120%",height:6,color:"#E24E49",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:0,direction:"LeftRight"}},{top:-26,left:"48.5%",width:6,height:"120%",color:"#E24E49",hidden:!0,animation:{duration:1e3,easing:"easeInOutExpo",delay:0,direction:"TopBottom"}}]}),setTimeout(function(){a.lineMaker.animateLineIn(4,{complete:function(){a.lineMaker.showLine(0)}}),a.lineMaker.animateLineIn(5,{complete:function(){a.lineMaker.showLine(1)}}),a.lineMaker.animateLineIn(6,{complete:function(){a.lineMaker.showLine(2)}}),a.lineMaker.animateLineIn(7,{complete:function(){a.lineMaker.showLine(3)}})},0),setTimeout(function(){a.lineMaker.animateLineOut(4),a.lineMaker.animateLineOut(5),a.lineMaker.animateLineOut(6),a.lineMaker.animateLineOut(7)},2e3),setTimeout(function(){GameBoard.render(gb.gameboard)},2e3)},win:function(e,i,n){"O"===n?0===e&&2===i?a.lineMaker.animateLineIn(12):3===e&&5===i?a.lineMaker.animateLineIn(8):6===e&&8===i?a.lineMaker.animateLineIn(13):0===e&&6===i?a.lineMaker.animateLineIn(10):1===e&&7===i?a.lineMaker.animateLineIn(9):2===e&&8===i?a.lineMaker.animateLineIn(11):0===e&&8===i?a.diagonalLineMaker.animateLineIn(0):2===e&&6===i&&a.diagonalLineMaker.animateLineIn(1):0===e&&2===i?a.lineMaker.animateLineIn(18):3===e&&5===i?a.lineMaker.animateLineIn(14):6===e&&8===i?a.lineMaker.animateLineIn(19):0===e&&6===i?a.lineMaker.animateLineIn(16):1===e&&7===i?a.lineMaker.animateLineIn(15):2===e&&8===i?a.lineMaker.animateLineIn(17):0===e&&8===i?a.diagonalLineMaker.animateLineIn(2):2===e&&6===i&&a.diagonalLineMaker.animateLineIn(3)},gameOver:function(){a.lineMaker.hideLine(8),a.lineMaker.hideLine(9),a.lineMaker.hideLine(10),a.lineMaker.hideLine(11),a.lineMaker.hideLine(12),a.lineMaker.hideLine(13),a.diagonalLineMaker.hideLine(0),a.diagonalLineMaker.hideLine(1),a.lineMaker.hideLine(14),a.lineMaker.hideLine(15),a.lineMaker.hideLine(16),a.lineMaker.hideLine(17),a.lineMaker.hideLine(18),a.lineMaker.hideLine(19),a.diagonalLineMaker.hideLine(2),a.diagonalLineMaker.hideLine(3)}},$(document).ready(function(){GameBoard.init(),GameActions.init(),Animation.init()});